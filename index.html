<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1"
		/>
		<meta name="mobile-web-app-capable" content="yes" />
		<base target="_blank" />

		<title>getUserMedia</title>

		<link href="css/index.css" rel="stylesheet" />
	</head>

	<body>
		<div id="container">
			<div class="invisible">
				<video id="gum-local" autoplay playsinline></video>
			</div>
			<canvas id="canvasOutput" width="320" height="240"></canvas>
			<button id="showVideo">Open camera</button>

			<div id="errorMsg"></div>
		</div>

		<script src="js/adapter-latest.js"></script>
		<script src="js/utils.js"></script>
		<!-- <script async src="js/opencv.js" onload="opencvIsReady()"></script> -->
		<script src="js/index.js"></script>
		<script>
			var Module = {
				wasmBinaryFile:
					"https://huningxin.github.io/opencv.js/build/wasm/opencv_js.wasm",
				preRun: [
					function() {
						// Module.FS_createPreloadedFile('/', 'haarcascade_eye.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_eye.xml', true, false);
						Module.FS_createPreloadedFile(
							"/",
							"haarcascade_frontalface_default.xml",
							"https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_frontalface_default.xml",
							true,
							false
						);
						// Module.FS_createPreloadedFile('/', 'haarcascade_profileface.xml', 'https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_profileface.xml', true, false);
					}
				],
				_main: function() {
					opencvIsReady();
				}
			};
		</script>
		<script
			async
			src="https://huningxin.github.io/opencv.js/build/wasm/opencv.js"
		></script>
	</body>
</html>
